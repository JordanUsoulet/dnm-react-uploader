import e from"react";import n from"prop-types";import t from"validator/lib/isURL";import o from"lodash-es/concat";import r from"lodash-es/isString";import a from"lodash-es/last";import i from"lodash-es/map";import l from"lodash-es/round";import c from"lodash-es/split";import p from"lodash-es/upperCase";import s from"lodash-es/camelCase";import d from"lodash-es/difference";import u from"lodash-es/get";import m from"lodash-es/upperFirst";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(){return(g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,n){return(b=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z=function(n){return e.createElement("svg",g({viewBox:"0 0 512.001 512.001"},n),e.createElement("path",{d:"M405.967 187.467c-1.069-78.061-64.902-141.239-143.213-141.239-34.835 0-68.396 12.672-94.498 35.682-23.296 20.535-39.232 47.977-45.543 78.106-.461-.005-.918-.009-1.374-.009C54.434 160.008 0 214.441 0 281.347s54.434 121.339 121.34 121.339h44.534c6.029 0 10.919-4.888 10.919-10.919 0-6.031-4.89-10.919-10.919-10.919H121.34c-54.866 0-99.502-44.636-99.502-99.501s44.636-99.501 99.502-99.501c2.923 0 6.013.157 9.448.48 5.822.54 11.049-3.596 11.842-9.396 3.932-28.82 18.161-55.327 40.067-74.638 22.111-19.492 50.542-30.226 80.056-30.226 66.935 0 121.389 54.455 121.389 121.389 0 2.41-.449 8.642-.449 8.642a10.92 10.92 0 0 0 11.984 11.634 87.102 87.102 0 0 1 8.708-.44c47.297 0 85.778 38.48 85.778 85.778 0 47.297-38.48 85.777-85.778 85.777h-48.902c-6.029 0-10.919 4.888-10.919 10.919s4.89 10.919 10.919 10.919h48.902c59.339 0 107.616-48.275 107.616-107.615-.001-58.808-47.421-106.752-106.034-107.602z"}),e.createElement("path",{d:"M262.755 97.548c-45.658 0-84.742 34.121-90.914 79.367-.815 5.975 3.371 11.462 9.343 12.295 6.368.888 11.548-3.869 12.295-9.343 4.702-34.479 34.484-60.48 69.276-60.48 6.031 0 10.919-4.888 10.919-10.919 0-6.032-4.889-10.92-10.919-10.92zm50.524 312.735c-4.017-4.496-10.92-4.887-15.418-.868l-26.265 23.463V298.547c0-6.031-4.89-10.919-10.919-10.919-6.031 0-10.919 4.888-10.919 10.919v134.33l-26.264-23.463c-4.496-4.018-11.401-3.627-15.417.868-4.018 4.498-3.63 11.399.868 15.418l39.717 35.483a17.983 17.983 0 0 0 12.014 4.59 17.99 17.99 0 0 0 12.013-4.589l39.719-35.483c4.499-4.017 4.888-10.92.871-15.418z"}))},y=function(n){return e.createElement("svg",g({viewBox:"0 0 32 32"},n),e.createElement("path",{d:"M29.5 8C30.879 8 32 6.879 32 5.5v-3C32 1.121 30.879 0 29.5 0h-3A2.502 2.502 0 0 0 24 2.5V3H8v-.5C8 1.121 6.879 0 5.5 0h-3A2.503 2.503 0 0 0 0 2.5v3C0 6.879 1.122 8 2.5 8H3v16h-.5A2.503 2.503 0 0 0 0 26.5v3C0 30.879 1.122 32 2.5 32h3C6.879 32 8 30.879 8 29.5V29h16v.5c0 1.379 1.121 2.5 2.5 2.5h3c1.379 0 2.5-1.121 2.5-2.5v-3c0-1.379-1.121-2.5-2.5-2.5H29V8h.5zm-27-2a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h3c.275 0 .5.225.5.5v3c0 .275-.225.5-.5.5h-3zM6 29.5c0 .275-.225.5-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h3c.275 0 .5.225.5.5v3zm18-3v.5H8v-.5C8 25.121 6.879 24 5.5 24H5V8h.5C6.879 8 8 6.879 8 5.5V5h16v.5C24 6.879 25.121 8 26.5 8h.5v16h-.5a2.502 2.502 0 0 0-2.5 2.5zm5.5-.5c.275 0 .5.225.5.5v3c0 .275-.225.5-.5.5h-3a.501.501 0 0 1-.5-.5v-3c0-.275.225-.5.5-.5h3zm-3-20a.501.501 0 0 1-.5-.5v-3c0-.275.225-.5.5-.5h3c.275 0 .5.225.5.5v3c0 .275-.225.5-.5.5h-3z"}))},w=function(n){return e.createElement("svg",g({viewBox:"0 0 486.4 486.4"},n),e.createElement("path",{d:"M446 70H344.8V53.5c0-29.5-24-53.5-53.5-53.5h-96.2c-29.5 0-53.5 24-53.5 53.5V70H40.4c-7.5 0-13.5 6-13.5 13.5S32.9 97 40.4 97h24.4v317.2c0 39.8 32.4 72.2 72.2 72.2h212.4c39.8 0 72.2-32.4 72.2-72.2V97H446c7.5 0 13.5-6 13.5-13.5S453.5 70 446 70zM168.6 53.5c0-14.6 11.9-26.5 26.5-26.5h96.2c14.6 0 26.5 11.9 26.5 26.5V70H168.6V53.5zm226 360.7c0 24.9-20.3 45.2-45.2 45.2H137c-24.9 0-45.2-20.3-45.2-45.2V97h302.9v317.2h-.1z"}),e.createElement("path",{d:"M243.2 411c7.5 0 13.5-6 13.5-13.5V158.9c0-7.5-6-13.5-13.5-13.5s-13.5 6-13.5 13.5v238.5c0 7.5 6 13.6 13.5 13.6zm-88.1-14.9c7.5 0 13.5-6 13.5-13.5V173.7c0-7.5-6-13.5-13.5-13.5s-13.5 6-13.5 13.5v208.9c0 7.5 6.1 13.5 13.5 13.5zm176.2 0c7.5 0 13.5-6 13.5-13.5V173.7c0-7.5-6-13.5-13.5-13.5s-13.5 6-13.5 13.5v208.9c0 7.5 6 13.5 13.5 13.5z"}))},C=function(n){return e.createElement("svg",g({height:596,viewBox:"0 0 447.632 447"},n),e.createElement("path",{d:"M231.816 447.05c34.23-4.863 64.239-40.59 83.121-93.35a406.317 406.317 0 0 0-83.12-9.786zm0 0M286.504 438.66c2.023-.586 4.039-1.176 6.039-1.824 1.687-.543 3.352-1.129 5.016-1.711a203.39 203.39 0 0 0 5.882-2.121c1.664-.633 3.313-1.305 4.965-1.977 1.906-.8 3.809-1.597 5.692-2.398a240.401 240.401 0 0 0 10.422-4.922c1.601-.816 3.199-1.648 4.8-2.504 1.793-.96 3.575-1.941 5.344-2.95a203.403 203.403 0 0 0 4.703-2.753c1.735-1.066 3.461-2.133 5.176-3.2a191.535 191.535 0 0 0 4.578-2.991 221.095 221.095 0 0 0 5.008-3.504 417.693 417.693 0 0 0 4.422-3.2 365.942 365.942 0 0 0 4.847-3.793c1.426-1.136 2.848-2.265 4.25-3.433 1.598-1.328 3.13-2.703 4.68-4.078 1.36-1.207 2.727-2.403 4.055-3.64 1.527-1.427 3.015-2.903 4.504-4.368 1.289-1.273 2.593-2.527 3.855-3.832.235-.242.457-.504.7-.754a268.883 268.883 0 0 0-54.817-21.094 198.517 198.517 0 0 1-51.129 83.024c.649-.168 1.297-.305 1.945-.473 1.711-.48 3.391-1.008 5.063-1.504zm0 0M447.633 231.684H351.71a414.882 414.882 0 0 1-16.152 110.68 278.228 278.228 0 0 1 60.714 24.16 223.51 223.51 0 0 0 51.36-134.84zm0 0M231.816 215.684h103.895a400.208 400.208 0 0 0-15.75-106.743 421.384 421.384 0 0 1-88.145 10.512zm0 0M231.816.316v103.137a406.589 406.589 0 0 0 83.121-9.785C296.055 40.906 266.048 5.18 231.817.316zm0 0M231.816 327.914a421.648 421.648 0 0 1 88.145 10.516 400.236 400.236 0 0 0 15.75-106.746H231.816zm0 0M396.273 80.844a278.228 278.228 0 0 1-60.714 24.16 414.882 414.882 0 0 1 16.152 110.68h95.922a223.577 223.577 0 0 0-51.36-134.84zm0 0M385.465 68.707c-.235-.238-.457-.496-.688-.742-1.265-1.305-2.578-2.563-3.867-3.832-1.484-1.465-2.965-2.945-4.496-4.367-1.324-1.235-2.695-2.403-4.055-3.633-1.55-1.375-3.101-2.762-4.695-4.09-1.383-1.168-2.8-2.285-4.207-3.406a171.24 171.24 0 0 0-4.89-3.825 220.477 220.477 0 0 0-4.383-3.199 192.844 192.844 0 0 0-5.055-3.547 200.251 200.251 0 0 0-4.535-2.957 190.441 190.441 0 0 0-5.219-3.257 223.26 223.26 0 0 0-4.664-2.727 220.848 220.848 0 0 0-5.39-2.984c-1.602-.801-3.2-1.672-4.801-2.473-1.84-.93-3.696-1.824-5.598-2.703a174.071 174.071 0 0 0-4.875-2.227c-1.895-.84-3.809-1.597-5.719-2.398a225.094 225.094 0 0 0-4.953-1.969 191.214 191.214 0 0 0-5.879-2.117 210.272 210.272 0 0 0-5.016-1.715c-2-.648-4-1.238-6.054-1.832-1.664-.488-3.336-.984-5.02-1.43-.644-.175-1.3-.312-1.949-.48a198.532 198.532 0 0 1 51.129 83.023 268.485 268.485 0 0 0 54.879-21.113zm0 0M0 215.684h95.922a415.035 415.035 0 0 1 16.148-110.68 277.885 277.885 0 0 1-60.71-24.16A223.519 223.519 0 0 0 0 215.684zm0 0M215.816 447.05V343.915a406.589 406.589 0 0 0-83.12 9.785c18.878 52.762 48.89 88.488 83.12 93.352zm0 0M215.816 231.684H111.922a400.079 400.079 0 0 0 15.75 106.746 421.097 421.097 0 0 1 88.144-10.516zm0 0M215.816.316c-34.23 4.864-64.242 40.59-83.12 93.352a406.045 406.045 0 0 0 83.12 9.785zm0 0M215.816 119.453a421.384 421.384 0 0 1-88.144-10.512 400.05 400.05 0 0 0-15.75 106.743h103.894zm0 0M168.113 6.79c-.648.167-1.297.304-1.945.472-1.695.453-3.367.957-5.055 1.445-2.008.586-4 1.176-6.015 1.816-1.7.551-3.371 1.137-5.043 1.72-1.957.69-3.918 1.378-5.856 2.112-1.672.641-3.32 1.305-4.976 1.985-1.903.8-3.809 1.601-5.688 2.398-1.648.723-3.277 1.48-4.91 2.242a223.908 223.908 0 0 0-5.512 2.68 228.526 228.526 0 0 0-10.137 5.457 149.244 149.244 0 0 0-4.718 2.75c-1.738 1.047-3.457 2.13-5.168 3.2-1.54.984-3.067 1.976-4.578 3a221.095 221.095 0 0 0-5.008 3.503 403.614 403.614 0 0 0-4.426 3.203c-1.637 1.23-3.2 2.512-4.848 3.79-1.421 1.136-2.855 2.265-4.246 3.44-1.601 1.321-3.12 2.688-4.664 4.056-1.367 1.218-2.746 2.402-4.082 3.664-1.52 1.418-3 2.89-4.484 4.351-1.29 1.274-2.602 2.531-3.867 3.84-.23.242-.453.508-.696.754a268.581 268.581 0 0 0 54.817 21.098 198.45 198.45 0 0 1 51.105-82.977zm0 0M66.719 383.234c1.488 1.465 2.969 2.946 4.496 4.371 1.328 1.23 2.695 2.399 4.058 3.63 1.551 1.378 3.102 2.761 4.696 4.09 1.383 1.16 2.793 2.28 4.207 3.405 1.601 1.297 3.199 2.586 4.894 3.833 1.442 1.082 2.907 2.128 4.371 3.203 1.672 1.199 3.36 2.398 5.063 3.55a214.813 214.813 0 0 0 4.535 2.961c1.73 1.11 3.457 2.2 5.219 3.254 1.543.93 3.101 1.84 4.664 2.73a208.275 208.275 0 0 0 5.39 2.981c1.598.801 3.2 1.672 4.801 2.473 1.84.93 3.696 1.824 5.598 2.707 1.601.754 3.226 1.496 4.875 2.223 1.894.84 3.805 1.597 5.719 2.398 1.648.672 3.289 1.336 4.953 1.969 1.941.746 3.91 1.441 5.879 2.12 1.664.583 3.328 1.169 5.015 1.712 2 .648 4 1.242 6.055 1.832 1.664.488 3.336.984 5.016 1.433.648.176 1.304.313 1.953.48a198.57 198.57 0 0 1-51.13-83.027 268.607 268.607 0 0 0-54.816 21.106c.235.238.458.496.692.742 1.2 1.297 2.492 2.555 3.797 3.824zm0 0M51.36 366.523a278.275 278.275 0 0 1 60.71-24.16 415.035 415.035 0 0 1-16.148-110.68H0a223.552 223.552 0 0 0 51.36 134.84zm0 0"}))},k=function(n){return e.createElement("svg",g({viewBox:"0 0 490 490"},n),e.createElement("path",{d:"M0 167.85v216.2c0 33 26.8 59.8 59.8 59.8h370.4c33 0 59.8-26.8 59.8-59.8v-216.2c0-31.4-25.5-56.9-56.9-56.9h-79.6l-1.9-8.3c-7.7-33.3-37-56.5-71.2-56.5h-70.9c-34.1 0-63.4 23.2-71.2 56.5l-1.9 8.3H56.9c-31.4 0-56.9 25.6-56.9 56.9zm146.2-32.4c5.7 0 10.6-3.9 11.9-9.5l4.1-17.8c5.2-22.1 24.6-37.5 47.3-37.5h70.9c22.7 0 42.1 15.4 47.3 37.5l4.1 17.8c1.3 5.5 6.2 9.5 11.9 9.5H433c17.9 0 32.4 14.5 32.4 32.4v216.2c0 19.5-15.8 35.3-35.3 35.3H59.8c-19.5 0-35.3-15.8-35.3-35.3v-216.2c0-17.9 14.5-32.4 32.4-32.4h89.3z"}),e.createElement("circle",{cx:82.9,cy:187.75,r:16.4}),e.createElement("path",{d:"M245 380.95c56.7 0 102.9-46.2 102.9-102.9s-46.2-102.9-102.9-102.9-102.9 46.1-102.9 102.9 46.2 102.9 102.9 102.9zm0-181.3c43.2 0 78.4 35.2 78.4 78.4s-35.2 78.4-78.4 78.4-78.4-35.2-78.4-78.4 35.2-78.4 78.4-78.4z"}))},E=function(n){return e.createElement("svg",g({viewBox:"0 0 79 79"},n),e.createElement("path",{d:"M0 44.866v20.008c0 4.685 4.312 8.115 8.996 8.115h41.008c4.685 0 7.996-3.431 7.996-8.115v-.268l15.1 7.501c.28.142.464.215.777.215 2.943 0 5.123-2.396 5.123-5.454V40.976c0-3.058-2.055-5.452-4.998-5.452-.312 0-.494.073-.773.213L58.284 43.28c-.722-3.802-3.95-6.705-7.913-6.89 4.167-3.066 6.903-7.989 6.903-13.548 0-9.28-7.541-16.831-16.822-16.831-7.581 0-13.998 5.042-16.097 11.946a12.695 12.695 0 0 0-9.027-3.764c-7.024 0-12.738 5.715-12.738 12.738 0 3.867 1.489 7.331 4.219 9.669C3.055 37.481 0 40.848 0 44.866zm74.121-5.289c.602.183.879.81.879 1.399v25.892c0 .59-.277 1.218-.877 1.401L58 60.125V47.678l16.121-8.101zm-47.379-7.401c1.039 1.464 2.307 2.813 3.75 3.813h-6.637c1.187-1 2.169-2.364 2.887-3.813zm.888-9.333c0-7.075 5.755-12.831 12.829-12.831 7.075 0 12.83 5.756 12.83 12.831 0 7.073-5.755 12.828-12.83 12.828-6.016 0-11.063-4.168-12.443-9.764a12.62 12.62 0 0 0-.333-2.025 12.767 12.767 0 0 1-.053-1.039zm-12.3-4.649c3.97 0 7.324 2.664 8.384 6.296.067.689.185 1.363.333 2.026.006.139.021.275.021.416 0 4.818-3.92 8.738-8.738 8.738-4.819 0-8.739-3.92-8.739-8.738s3.92-8.738 8.739-8.738zM54 64.493a4.496 4.496 0 0 1-4.496 4.496H8.496A4.496 4.496 0 0 1 4 64.493V44.485a4.496 4.496 0 0 1 4.496-4.496h41.008A4.496 4.496 0 0 1 54 44.485v20.008z"}))},L={video:{mimeTypes:["video/x-flv","video/mp4","application/octet-stream","application/x-mpegURL","video/MP2T","video/3gpp","video/quicktime","video/x-msvideo","video/x-ms-wmv"],extensions:["3g2","3gp","amv","asf","avi","drc","f4a","f4b","f4p","f4v","flv","gif","gifv","m2v","m4p","m4v","mkv","mov","mng","mp2","mp4","mpe","mpeg","mpg","mpv","MTS","M2TS","mxf","nsv","ogg","qt","rm","rmvb","roq","svi","vob","webm","wmv","yuv"]},image:{mimeTypes:["image/gif","image/jpeg","image/png","image/tiff","image/vnd.microsoft.icon","image/vnd.djvu","image/svg+xml"],extensions:["3dv","PI1","PI2","PI3","ai","amf","art","art","ase","awg","blp","bmp","bw","bw","cd5","cdr","cgm","cit","cmx","cpt","cr2","cur","cut","dds","dib","djvu","dxf","e2d","ecw","egt","egt","emf","eps","exif","fs","gbr","gif","gpl","grf","hdp","icns","ico","iff","iff","int","int","inta","jfif","jng","jp2","jpeg","jpg","jps","jxr","lbm","lbm","liff","max","miff","mng","msp","nitf","nrrd","odg","ota","pam","pbm","pc1","pc2","pc3","pcf","pct","pcx","pcx","pdd","pdn","pgf","pgm","pict","png","pnm","pns","ppm","psb","psd","psp","px","pxm","pxr","qfx","ras","raw","rgb","rgb","rgba","rle","sct","sgi","sgi","sid","stl","sun","svg","sxd","tga","tga","tif","tiff","v2d","vnd","vrml","vtf","wdp","webp","wmf","x3d","xar","xbm","xcf","xpm"]},compressedFile:{mimeTypes:["application/x-bzip2","application/gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/zip","application/x-zoo"],extensions:["bz2","gz","F","lz","lzma","lzo","rz","sfark","sz","xz","z","Z","?Q?","?XF","?Z?","??_","7z","ace","afa","alz","apk","arc","arj","b1","b6z","ba","bh","cab","car","cfs","cpt","dar","dd","dgc","dmg","ear","gca","ha","hki","ice","jar","kgb","lha","lzh","lzx","pak","paq6","paq7","paq8","partimg","pea","pim","pit","qda","rar","rk","s7z","sda","sea","sen","sfx","shk","sit","sitx","sqx","tar.bz2","tar.gz","tar.lzma","tar.xz","tar.Z","tbz2","tgz","tlz","txz","ue2","uc","uc0","uc2","uca","ucn","uha","ur2","war","wim","xar","xp3","yz1","zip","zipx","zoo","zpaq","zz"]}},j={},T={concat:o,isString:r,last:a,map:i,round:l,split:c,upperCase:p};j.initializeDrag=function(){window.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1)},j.base64MimeType=function(e){var n=null;if("string"!=typeof e)return n;var t=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return t&&t.length&&(n=t[1]),n},j.isBase64=function(e){return null!==j.base64MimeType(e)},j.extension=function(e){return e=T.isString(e)?e:e.name,T.last(T.split(e,"."))},j.fileType=function(e){if(!e.match(/\//)){var n={video:L.video.extensions,image:L.image.extensions,compressedFile:L.compressedFile.extensions};for(var t in n){if(-1!==T.concat(n[t],T.map(n[t],function(e){return T.upperCase(e)})).indexOf(e))return t}}else{var o={video:L.video.mimeTypes,image:L.image.mimeTypes,compressedFile:L.compressedFile.mimeTypes};for(var r in o){if(-1!==o[r].indexOf(e))return r}}return null},j.guessFileType=function(e){return j.fileType(j.base64MimeType(e)||j.extension(e))},j.humanSize=function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=["B","KB","MB","GB","TB"],o=t.length-1;o>=0;o--){var r=1*e/Math.pow(1e3,o);if(r>=1)return n&&(r=T.round(r)),"".concat(r," ").concat(t[o])}};var R={isURL:t},M={camelCase:s,difference:d,get:u,last:a,upperFirst:m,split:c},S=function(n){function t(e){var n,o,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=v(t).call(this,e))||"object"!=typeof r&&"function"!=typeof r?x(o):r).state={beingDropTarget:!1,height:null,file:null,loaded:!0,mounted:!1,url:"",width:null},n.change=n.change.bind(x(n)),n.handleChange=n.handleChange.bind(x(n)),n.handleClick=n.handleClick.bind(x(n)),n.handleCropClick=n.handleCropClick.bind(x(n)),n.handleDragLeave=n.handleDragLeave.bind(x(n)),n.handleDragOver=n.handleDragOver.bind(x(n)),n.handleDrop=n.handleDrop.bind(x(n)),n.handleInjectURLClick=n.handleInjectURLClick.bind(x(n)),n.handleLoad=n.handleLoad.bind(x(n)),n.handleRemoveClick=n.handleRemoveClick.bind(x(n)),n.handleURLChange=n.handleURLChange.bind(x(n)),n.get=n.get.bind(x(n)),n.injectURL=n.injectURL.bind(x(n)),n.change=n.change.bind(x(n)),n}var o,r,a;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&b(e,n)}(t,e.Component),o=t,(r=[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),j.initializeDrag()}},{key:"change",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return null},t=this.props.maxSize;j.guessFileType(e)!==this.props.fileType?this.props.onInvalidFileExtensionError():t&&e.size>=t?this.props.onFileTooLargeError():this.props.onChange(e),n(e),this.refs.input.value=null}},{key:"handleChange",value:function(e){var n=M.get(e,"target.files.0");n&&this.change(n)}},{key:"handleClick",value:function(e){this.refs.input.click()}},{key:"handleCropClick",value:function(e){e.stopPropagation(),this.props.onCropClick()}},{key:"handleDragLeave",value:function(){this.setState({beingDropTarget:!1})}},{key:"handleDragOver",value:function(){this.setState({beingDropTarget:!0})}},{key:"handleDrop",value:function(e){e.preventDefault(),this.setState({beingDropTarget:!1});var n=M.get(e,"dataTransfer.files.0");n&&this.change(n)}},{key:"handleInjectURLClick",value:function(){this.injectURL(this.state.url,!0)}},{key:"handleLoad",value:function(){void 0===this.firstLoadDone&&(this.firstLoadDone=!0,this.props.onFirstLoad(),this.setState({loaded:!0})),this.props.onLoad()}},{key:"handleRemoveClick",value:function(e){e.stopPropagation(),this.props.onRemoveClick()}},{key:"handleURLChange",value:function(e){var n=e.target.value;this.setState({url:n})}},{key:"get",value:function(e){return new Promise(function(n,t){var o=new XMLHttpRequest;o.responseType="blob",o.open("GET",e,!0),o.onload=function(){200===o.status?n(o.response):t(Error(o.statusText))},o.onerror=function(){return t(Error("Network Error"))},o.send()})}},{key:"injectURL",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return null};!t||R.isURL(e)?this.get(e).then(function(t){var r=M.last(M.split(e,"/")),a=new File([t],r,{type:t.type});n.change(a,o)}).catch(function(e){n.props.onURLInjectionError()}):this.props.onInvalidURLError()}},{key:"render",value:function(){var n=this,t=null,o=null,r=this.props.src&&(this.props.removable||this.props.croppable);if(this.props.src)switch(this.props.fileType||j.guessFileType(this.props.src)){case"image":if(this.state.loaded&&this.state.mounted&&this.props.imageCrop){var a=this.refs.zone.offsetWidth,i=this.refs.zone.offsetHeight,l=this.refs.img.offsetWidth,c=this.refs.img.offsetHeight,p=this.refs.img.naturalWidth,s=this.refs.img.naturalHeight,d=l*this.props.imageCrop.x/p,u=c*this.props.imageCrop.y/s,m=l*this.props.imageCrop.width/p,h=c*this.props.imageCrop.height/s,f=m/h,v=null;v="contain"===this.props.backgroundSize?i*f>a?a/m:i/h:i*f>a?i/h:a/m,t=e.createElement("img",{alt:"",ref:"img",src:this.props.src,onLoad:this.handleLoad,style:{position:"absolute",top:"50%",left:"50%",transformOrigin:"".concat(d+m/2,"px ").concat(u+h/2,"px"),transform:"\n                                        translateX(-".concat(d+m/2,"px)\n                                        translateY(-").concat(u+h/2,"px)\n                                        scale(").concat(v,")\n                                    "),clip:"rect(\n                                        ".concat(u,"px\n                                        ").concat(d+m,"px\n                                        ").concat(u+h,"px\n                                        ").concat(d,"px)\n                                    ")}})}else t=e.createElement("div",{style:{backgroundColor:this.props.backgroundColor,backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:this.props.backgroundSize,backgroundImage:"url(".concat(this.props.src,")"),position:"relative",width:"100%",height:"100%"}},e.createElement("img",{alt:"",ref:"img",src:this.props.src,onLoad:this.handleLoad,style:{position:"fixed",top:"-9999px",left:"-9999px"}}));break;case"video":t=e.createElement("video",{autoPlay:!0,loop:!0,muted:!0,src:this.props.src,onLoadedData:this.handleLoad,style:"cover"===this.props.backgroundSize?{height:"100%"}:{maxHeight:"100%",maxWidth:"100%"}})}switch(this.props.fileType){case"image":o=e.createElement(k,{className:"uploader-zone-fog-img"});break;case"video":o=e.createElement(E,{className:"uploader-zone-fog-img"})}return e.createElement("div",g({"data-attr":"root"},M.get(this.props.customAttributes,"root",{}),{className:"\n                    uploader\n                    ".concat(M.get(this.props.customAttributes,"root.className",""),"\n                    ").concat(this.props.fetching?"uploader/fetching":"","\n                    ").concat(this.props.withURLInput?"uploader/withUrl":"","\n                    ").concat(r?"uploader/withControls":"","\n                ")}),e.createElement("input",{"data-attr":"input",ref:"input",type:"file",className:"uploader-input",onChange:this.handleChange}),e.createElement("div",{ref:"zone",className:"\n                        uploader-zone\n                        ".concat(this.props.withURLInput?"uploader-zone/withUrl":"","\n                    "),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},t,e.createElement("div",{className:"uploader-zone-fog",onClick:this.handleClick},this.state.beingDropTarget?e.createElement(z,{className:"uploader-zone-fog-img"}):o,e.createElement("div",{className:"uploader-zone-fog-caption"},this.props.fetching?this.props.catalogue.loading:"".concat(this.props.catalogue.click).concat(this.props.catalogue.drop?"/".concat(this.props.catalogue.drop):"").concat(this.props.withURLInput?"/".concat(this.props.catalogue.typeURL):"")),!0===r&&e.createElement(e.Fragment,null,e.createElement("div",{className:"uploader-zone-fog-or"},e.createElement("div",{className:"uploader-zone-fog-or-wing"}),e.createElement("div",{className:"uploader-zone-fog-or-body"},this.props.catalogue.or),e.createElement("div",{className:"uploader-zone-fog-or-wing"})),e.createElement("div",{className:"uploader-zone-fog-controls"},!0===this.props.croppable&&e.createElement("span",{className:"uploader-zone-fog-controls-control",onClick:this.handleCropClick},this.props.cropIcon||e.createElement(y,null)),!0===this.props.removable&&e.createElement("span",{className:"uploader-zone-fog-controls-control",onClick:this.handleRemoveClick},this.props.removeIcon||e.createElement(w,null)))))),!0===this.props.withURLInput&&e.createElement("div",{className:"uploader-url"},e.createElement("input",{className:"uploader-url-input",name:"url",value:this.state.url,placeholder:this.props.catalogue.urlInputPlaceholder,type:"text",onChange:this.handleURLChange,onKeyPress:function(e){13===e.which&&(e.preventDefault(),n.handleInjectURLClick())}}),e.createElement("span",{className:"uploader-url-addon",onClick:this.handleInjectURLClick},e.createElement(C,{className:"uploader-url-addon-icon"}),this.props.catalogue.urlSubmitText)))}}])&&f(o.prototype,r),a&&f(o,a),t}();S.propTypes={backgroundColor:n.string,backgroundSize:n.oneOf(["contain","cover"]),catalogue:function(e,n,t){var o=e[n],r=Object.keys(e[n]),a=Object.keys(S.defaultProps[n]);if(!o||"object"!==h(o))throw new Error("Catalogue must be an object.");var i=M.difference(a,r);if(i.length)throw new Error("Given catalogue is insufficient. Missing keys: "+JSON.stringify(i))},croppable:n.bool,customAttributes:n.object,fetching:n.bool,fileType:n.oneOf(["image","video"]),imageCrop:n.object,maxSize:n.number,onChange:n.func,onCropClick:n.func,onFileTooLargeError:n.func,onFirstLoad:n.func,onInvalidFileExtensionError:n.func,onInvalidURLError:n.func,onLoad:n.func,onRemoveClick:n.func,onURLInjectionError:n.func,removable:n.bool,src:n.string,withURLInput:n.bool},S.defaultProps={backgroundColor:"transparent",backgroundSize:"cover",catalogue:{click:null,drop:null,typeURL:null,loading:null,or:null,urlInputPlaceholder:null,urlSubmitText:null},croppable:!1,cropIcon:null,customAttributes:{},fetching:!1,fileType:"image",imageCrop:null,maxSize:1e7,onChange:function(e){return null},onCropClick:function(){return null},onFileTooLargeError:function(){return null},onFirstLoad:function(){return null},onInvalidFileExtensionError:function(){return null},onInvalidURLError:function(){return null},onLoad:function(){return null},onRemoveClick:function(){return null},onURLInjectionError:function(){return null},removable:!1,removeIcon:null,src:null,withURLInput:!1};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("@keyframes pulse {\n    from {\n        transform: scale(0.7);\n    }\n    50% {\n        transform: scale(1);\n    }\n    to {\n        transform: scale(0.7);\n    }\n}\n.uploader {\n    position: relative;\n}\n.uploader\\/fetching .uploader-zone-fog-img {\n    animation: pulse 2s linear infinite;\n}\n.uploader\\/withUrl .uploader-zone {\n    border-top-left-radius: 0.25rem !important;\n    border-top-right-radius: 0.25rem !important;\n    border-bottom-left-radius: 0 !important;\n    border-bottom-right-radius: 0 !important;\n}\n.uploader\\/withControls .uploader-zone-fog-caption {\n    margin-top: 0;\n    bottom: 0;\n}\n.uploader\\/withControls .uploader-zone-fog-img {\n    width: 2.6rem;\n    top: 0.3rem;\n}\n.uploader\\/withControls .uploader-zone-fog-controls {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-flow: row wrap;\n    position: relative;\n    bottom: 0.3rem;\n}\n.uploader\\/withControls .uploader-zone-fog-or {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-flow: row;\n    font-size: 80%;\n    width: 100%;\n}\n.uploader\\/withControls .uploader-zone-fog-or-wing {\n    flex-grow: 1;\n    height: 0;\n    border-style: solid;\n    border-width: .06rem 0 0 0;\n    border-color: white;\n}\n.uploader\\/withControls .uploader-zone-fog-or-body {\n    padding: 0.5rem 0.7rem;\n    user-select: none;\n}\n.uploader\\/withControls .uploader-zone-fog-controls > * {\n    margin: 0 0.3rem;\n}\n.uploader\\/withControls .uploader-zone-fog-controls-control {\n    height: 1.6rem;\n    width: 1.6rem;\n    fill: white;\n}\n.uploader img {\n    max-height: 100%;\n    max-width: 100%;\n    height: auto;\n    width: auto;\n}\n.uploader-url-addon {\n    display: flex;\n    align-items: center;\n    padding: .375rem .75rem;\n    margin-bottom: 0;\n    font-weight: 400;\n    line-height: 1.5;\n    color: #495057;\n    text-align: center;\n    white-space: nowrap;\n    background-color: #e9ecef;\n    border: 1px solid #ced4da;\n    border-left-width: 0;\n    border-top-right-radius: 0;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: .25rem;\n}\n.uploader-url-addon svg {\n    margin-right: 0.6rem;\n    fill: #495057;\n    height: 1.4rem;\n}\n.uploader-url-input {\n    display: block;\n    height: calc(1.5em + .75rem + 2px);\n    padding: .375rem .75rem;\n    font-weight: 400;\n    font-size: 1rem;\n    line-height: 1.5;\n    color: #495057;\n    background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid #ced4da;\n    border-radius: .25rem;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    position: relative;\n    flex-grow: 1;\n    margin-bottom: 0;\n}\n.uploader-url-input:focus {\n    outline: none;\n}\n.uploader-url {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: stretch;\n    flex-flow: row;\n    cursor: pointer;\n}\n.uploader-zone {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-flow: row wrap;\n    width: 100%;\n    height: 14rem;\n    overflow: hidden;\n    position: relative;\n    border-radius: 500rem;\n    color: white;\n}\n.uploader-zone-fog {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    flex-flow: column;\n    background: rgba(0, 0, 0, 0.2);\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n}\n.uploader-zone-fog:hover {\n    background: rgba(0, 0, 0, 0.5);\n}\n.uploader-zone-fog-caption {\n    width: 80%;\n    text-align: center;\n    position: relative;\n    bottom: 1rem;\n    margin-top: 1rem;\n    text-shadow: 0 0 0.5rem black;\n}\n.uploader-zone-fog-img {\n    width: 5rem;\n    fill: white;\n    position: relative;\n    top: 1rem;\n}\n.uploader-input {\n    position: fixed;\n    top: -9999px;\n    left: -9999px;\n}");export default S;
